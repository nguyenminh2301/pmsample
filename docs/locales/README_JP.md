# äºˆå¾Œãƒ¢ãƒ‡ãƒ«ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆ (Prognosis-N)

> *è‡¨åºŠäºˆæ¸¬ãƒ¢ãƒ‡ãƒ«ã®é–‹ç™ºã€æ¤œè¨¼ã€æ›´æ–°ã®ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã€‚*

[![Streamlit App](https://static.streamlit.io/badges/streamlit_badge_black_white.svg)](https://pmsample.streamlit.app/)
[![Python 3.9+](https://img.shields.io/badge/python-3.9%2B-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

è‡¨åºŠäºˆå¾Œç ”ç©¶ã«ãŠã‘ã‚‹æœ€å°ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã‚’è¨ˆç®—ã™ã‚‹ãŸã‚ã®ãƒ„ãƒ¼ãƒ«ã‚­ãƒƒãƒˆã§ã™ã€‚ãƒ‡ãƒ¼ã‚¿ã‚µã‚¤ã‚¨ãƒ³ãƒ†ã‚£ã‚¹ãƒˆã€çµ±è¨ˆå­¦è€…ã€è‡¨åºŠç ”ç©¶è€…å‘ã‘ã«è¨­è¨ˆã•ã‚Œã¦ãŠã‚Šã€**äºˆæ¸¬ãƒ¢ãƒ‡ãƒ«é–‹ç™º**ã€**å¤–éƒ¨æ¤œè¨¼**ã€**äºˆå¾Œå› å­ç ”ç©¶**ã€**ãƒ¢ãƒ‡ãƒ«æ›´æ–°**ã®ãŸã‚ã®æ¤œè¨¼æ¸ˆã¿ã®çµ±è¨ˆæ‰‹æ³•ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚

ğŸ”— **ã‚¢ãƒ—ãƒªã«ã‚¢ã‚¯ã‚»ã‚¹:** [https://pmsample.streamlit.app/](https://pmsample.streamlit.app/)

> **æ³¨æ„**: æœ¬ã‚¢ãƒ—ãƒªã®ä¸­å›½èªã€æ—¥æœ¬èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ãƒ‰ã‚¤ãƒ„èªã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã®ä¸€éƒ¨ã¯AIã«ã‚ˆã£ã¦ç¿»è¨³ã•ã‚Œã¦ã„ã¾ã™ã€‚ã”ä¸æ˜ãªç‚¹ãŒã”ã–ã„ã¾ã—ãŸã‚‰ã€ã‚¢ãƒ—ãƒªç®¡ç†è€…ã¾ã§ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚

---

## 1. æ¦‚è¦ã¨ç›®çš„

æœ¬ã‚¢ãƒ—ãƒªã¯ã€åŒ»å­¦ç ”ç©¶ã«ãŠã‘ã‚‹ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºè¨ˆç”»ã®è¤‡é›‘ãªè¦ä»¶ã«å¯¾å‡¦ã™ã‚‹ãŸã‚ã®ä¸€é€£ã®ãƒ„ãƒ¼ãƒ«ã‚’æä¾›ã—ã¾ã™ã€‚åŸºæœ¬çš„ãªæ¤œå‡ºåŠ›è¨ˆç®—æ©Ÿã¨ã¯ç•°ãªã‚Šã€ã“ã®ãƒ„ãƒ¼ãƒ«ã¯*äºˆå¾Œãƒ¢ãƒ‡ãƒªãƒ³ã‚°*ã®ç‰¹å®šã®ãƒ‹ãƒ¥ã‚¢ãƒ³ã‚¹ã«ç„¦ç‚¹ã‚’å½“ã¦ã¦ãŠã‚Šã€å˜ç´”ãªä»®èª¬æ¤œå®šã§ã¯ãªãã€ãƒªã‚¹ã‚¯ã®æ­£ç¢ºãªæ¨å®šï¼ˆã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã¨è­˜åˆ¥èƒ½ï¼‰ã‚’ç›®æ¨™ã¨ã™ã‚‹ã“ã¨ãŒã‚ˆãã‚ã‚Šã¾ã™ã€‚

### ä¸»ãªæ©Ÿèƒ½

* **æ–¹æ³•è«–çš„å³å¯†ã•**: æŸ»èª­ä»˜ãçµ±è¨ˆæ–‡çŒ® (Riley et al., Hanley & McNeil, Hsieh, et al.) ã«å³å¯†ã«æº–æ‹ ã—ãŸã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã‚’å®Ÿè£…ã—ã¦ã„ã¾ã™ã€‚
* **æ¤œè¨¼ (Validation)**: ã‚³ã‚¢è¨ˆç®—ã¯ã€æ­£ç¢ºæ€§ã‚’ä¿è¨¼ã™ã‚‹ãŸã‚ã«ä¿¡é ¼ã§ãã‚‹Rãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ (`pmsampsize`, `presize`, `pmvalsampsize`, `sampsizeval`) ã¨ç…§åˆã•ã‚Œã¦ã„ã¾ã™ã€‚
* **å¤šè¨€èªã‚µãƒãƒ¼ãƒˆ**: è‹±èªã¨ãƒ™ãƒˆãƒŠãƒ èªã‚’å®Œå…¨ã«ã‚µãƒãƒ¼ãƒˆã—ã€ä¸­å›½èªã€æ—¥æœ¬èªã€ãƒ•ãƒ©ãƒ³ã‚¹èªã€ãƒ‰ã‚¤ãƒ„èªã‚‚éƒ¨åˆ†çš„ã«ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€å›½éš›å”åŠ›ã‚’ä¿ƒé€²ã—ã¾ã™ã€‚
* **æ„Ÿåº¦åˆ†æ**: çµ±åˆã•ã‚ŒãŸãƒãƒƒãƒå‡¦ç†ã«ã‚ˆã‚Šã€ç ”ç©¶è€…ã¯ã•ã¾ã–ã¾ãªä»®å®šï¼ˆä¾‹ï¼šæœ‰ç—…ç‡ã‚„äºˆæƒ³ã•ã‚Œã‚‹ $R^2$ ã®å¤‰åŒ–ï¼‰ã«ã‚ãŸã£ã¦ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºè¦ä»¶ãŒã©ã®ã‚ˆã†ã«å¤‰åŒ–ã™ã‚‹ã‹ã‚’è©•ä¾¡ã§ãã¾ã™ã€‚

---

## 2. ãƒ¡ã‚½ãƒƒãƒ‰ã‚«ã‚¿ãƒ­ã‚°

ã‚¢ãƒ—ãƒªã¯éšå±¤çš„ã«æ§‹æˆã•ã‚Œã¦ã„ã¾ã™ï¼ˆã‚«ãƒ†ã‚´ãƒª A: äºŒå€¤ã‚¢ã‚¦ãƒˆã‚«ãƒ ï¼‰ã€‚

### A. äºŒå€¤ã‚¢ã‚¦ãƒˆã‚«ãƒ  (Binary Outcomes)

#### A1. ã‚¯ã‚¤ãƒƒã‚¯ãƒã‚§ãƒƒã‚¯ (Quick Checks)

| æ–¹æ³• | èª¬æ˜ | ç›®çš„ |
| :--- | :--- | :--- |
| **A1.1: ã‚¤ãƒ™ãƒ³ãƒˆå¯¾å¤‰æ•°æ¯” (EPV)** | çµŒé¨“å‰‡ï¼ˆãƒ’ãƒ¥ãƒ¼ãƒªã‚¹ãƒ†ã‚£ãƒƒã‚¯ï¼‰ã€‚ | å®Ÿç¾å¯èƒ½æ€§ã®ç¢ºèªã€‚ |
| **A1.2: ãƒ™ãƒ¼ã‚¹ãƒ©ã‚¤ãƒ³ãƒªã‚¹ã‚¯ã®ç²¾åº¦** | ç‰¹å®šã® CI å¹…ã§æœ‰ç—…ç‡ã‚’æ¨å®šã€‚ | è¨˜è¿°ç–«å­¦ã€‚ |

#### A2. äºˆå¾Œå› å­ (Prognostic Factors)

| æ–¹æ³• | èª¬æ˜ | ç›®çš„ |
| :--- | :--- | :--- |
| **A2.1: ãƒ­ã‚¸ã‚¹ãƒ†ã‚£ãƒƒã‚¯æ¤œå‡ºåŠ› (Hsieh)** | ã‚ªãƒƒã‚ºæ¯” (OR) ã‚’æ¤œå‡ºã™ã‚‹æ¤œå‡ºåŠ›ã€‚ | é–¢é€£æ€§ç ”ç©¶ã€‚ |
| **A2.2: Cox æ¤œå‡ºåŠ› (Schoenfeld)** | ãƒã‚¶ãƒ¼ãƒ‰æ¯” (HR) ã‚’æ¤œå‡ºã™ã‚‹æ¤œå‡ºåŠ›ã€‚ | ç”Ÿå­˜åˆ†æã€‚ |

#### A3. ãƒ¢ãƒ‡ãƒ«é–‹ç™º (Prediction Model Development)

| æ–¹æ³• | èª¬æ˜ | ç›®çš„ |
| :--- | :--- | :--- |
| **A3.1: è§£æçš„ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ (Riley)** | **æ¨å¥¨ã€‚** ã‚·ãƒ¥ãƒªãƒ³ã‚¯ã€æ¥½è¦³ã€ç²¾åº¦ã‚’èª¿æ•´ã€‚ | æ–°è¦ãƒ¢ãƒ‡ãƒ«é–‹ç™ºã€‚ |
| **A3.2: ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³è¨­è¨ˆ** | è¤‡é›‘ãªã‚·ãƒŠãƒªã‚ªã®ãŸã‚ã® DGM ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ | é–‹ç™ºï¼ˆè¤‡é›‘ï¼‰ã€‚ |
| **A3.3: ãƒ™ã‚¤ã‚ºä¿è¨¼ (Assurance)** | æˆåŠŸç¢ºç‡ã‚’ä¿è¨¼ã™ã‚‹ MCMC ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ | ãƒ™ã‚¤ã‚ºãƒ¢ãƒ‡ãƒ«é–‹ç™ºã€‚ |

#### A4. æ¤œè¨¼ã¨æ›´æ–° (Validation / Updating)

| æ–¹æ³• | èª¬æ˜ | ç›®çš„ |
| :--- | :--- | :--- |
| **A4.1: AUC ç²¾åº¦** | AUC (Cçµ±è¨ˆé‡) ã® CI å¹…ã€‚ | æ¤œè¨¼ï¼ˆè­˜åˆ¥èƒ½ï¼‰ã€‚ |
| **A4.2: å¤–éƒ¨æ¤œè¨¼** | O/Eã€ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã‚¹ãƒ­ãƒ¼ãƒ—ã€AUC ã®ç²¾åº¦ã€‚ | æ¤œè¨¼ï¼ˆå®Œå…¨ï¼‰ã€‚ |
| **A4.3: æ¤œè¨¼ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³** | LP åˆ†å¸ƒã«åŸºã¥ãã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ã€‚ | æ¤œè¨¼ï¼ˆã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼‰ã€‚ |
| **A4.4: ãƒ¢ãƒ‡ãƒ«æ›´æ–°** | å†ã‚­ãƒ£ãƒªãƒ–ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆåˆ‡ç‰‡/å‚¾ãï¼‰ã®ãŸã‚ã®ã‚µãƒ³ãƒ—ãƒ«ã‚µã‚¤ã‚ºã€‚ | ãƒ¢ãƒ‡ãƒ«æ›´æ–°ã€‚ |

---

## 3. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã¨ãƒ­ãƒ¼ã‚«ãƒ«å®Ÿè¡Œ

ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç‹¬è‡ªã®ã‚¤ãƒ³ãƒ•ãƒ©ã‚¹ãƒˆãƒ©ã‚¯ãƒãƒ£ã«ãƒ‡ãƒ—ãƒ­ã‚¤ã™ã‚‹ã«ã¯ï¼š

**ãƒªãƒã‚¸ãƒˆãƒª (Repositories):**

* **GitLab (ãƒ—ãƒ©ã‚¤ãƒãƒª)**: [`gitlab.com/minhthiennguyen/pmsample`](https://gitlab.com/minhthiennguyen/pmsample.git)
* **GitHub (ãƒŸãƒ©ãƒ¼)**: [`github.com/nguyenminh2301/pmsample`](https://github.com/nguyenminh2301/pmsample.git)

### å‰ææ¡ä»¶

* Python 3.9 ä»¥ä¸Š
* Git

### ãƒ‡ãƒ—ãƒ­ã‚¤æ‰‹é †

1. **ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ (Clone)**

   ```bash
   git clone https://github.com/nguyenminh2301/pmsample.git
   cd pmsample
   ```

2. **ç’°å¢ƒè¨­å®š**
   ä»®æƒ³ç’°å¢ƒ (virtual environment) ã®ä½¿ç”¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚

   ```bash
   python -m venv .venv
   # Windows:
   .venv\Scripts\activate
   # macOS/Linux:
   source .venv/bin/activate
   ```

3. **ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«**

   ```bash
   pip install -r requirements.txt
   ```

4. **ã‚¢ãƒ—ãƒªã®èµ·å‹•**

   ```bash
   streamlit run pmsampsize_app/app.py
   ```

---

## 4. å…è²¬äº‹é …

**å­¦è¡“ãŠã‚ˆã³ç ”ç©¶ç›®çš„ã®ã¿ã€‚**

æœ¬ã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢ã¯ã€æŸ»èª­ä»˜ãæ–‡çŒ®ã§ç™ºè¡¨ã•ã‚ŒãŸçµ±è¨ˆæ‰‹æ³•ã®å®Ÿè£…ã§ã™ã€‚ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã®æ­£ç¢ºæ€§ã‚’ç¢ºä¿ã™ã‚‹ãŸã‚ã«ã‚ã‚‰ã‚†ã‚‹åŠªåŠ›ãŒæ‰•ã‚ã‚Œã¦ã„ã¾ã™ãŒã€è‘—è€…ãŠã‚ˆã³ä¿å®ˆè€…ã¯ã€ã“ã®ãƒ„ãƒ¼ãƒ«ã«åŸºã¥ãç ”ç©¶ã®è¨­è¨ˆã¾ãŸã¯çµæœã«ã¤ã„ã¦ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚

* **ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®è²¬ä»»**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ã€å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã‚’æ¤œè¨¼ã—ã€ç‰¹å®šã®è‡¨åºŠçš„æ–‡è„ˆã®ä¸­ã§çµæœã‚’è§£é‡ˆã™ã‚‹è²¬ä»»ãŒã‚ã‚Šã¾ã™ã€‚
* **åŒ»ç™‚ä¿è¨¼ãªã—**: ã“ã®ãƒ„ãƒ¼ãƒ«ã¯åŒ»å­¦çš„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’æä¾›ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚

---

## 5. å¼•ç”¨

ç ”ç©¶ã§ã“ã®ãƒ„ãƒ¼ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹å ´åˆã¯ã€æ¬¡ã®ã‚ˆã†ã«å¼•ç”¨ã—ã¦ãã ã•ã„ï¼š

> Nguyen, M. (2025). Prognostic Research Sample Size Tool (Version 1.0) [Software]. Available at https://pmsample.streamlit.app/

ã¾ãŸã¯ã€BibTeXã‚¨ãƒ³ãƒˆãƒªã‚’ä½¿ç”¨ã—ã¾ã™ï¼š

```bibtex
@software{nguyen2025pmsample,
  author = {Nguyen, Minh},
  title = {Prognostic Research Sample Size Tool},
  year = {2025},
  url = {https://pmsample.streamlit.app/},
  version = {1.0}
}
```

---

**è‘—è€… & ä¿å®ˆ:**
Minh Nguyen (minhnt@ump.edu.vn)
Department of Epidemiology, Faculty of Public Health, University of Medicine and Pharmacy at Ho Chi Minh City, Vietnam
(Bá»™ mÃ´n Dá»‹ch tá»… há»c, Khoa Y táº¿ cÃ´ng cá»™ng, Äáº¡i há»c Y DÆ°á»£c TP. Há»“ ChÃ­ Minh, Viá»‡t Nam)
